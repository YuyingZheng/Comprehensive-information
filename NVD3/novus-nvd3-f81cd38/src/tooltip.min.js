nv.models.tooltip=function(){"use strict";function t(){if(!s||!s.node()){var t=[1];s=d3.select(document.body).selectAll("#"+n).data(t),s.enter().append("div").attr("class","nvtooltip "+(l?l:"xy-tooltip")).attr("id",n).style("top",0).style("left",0).style("opacity",0).style("position","fixed").selectAll("div, table, td, tr").classed(g,!0).classed(g,!0),s.exit().remove()}}function e(){if(f&&k(o))return nv.dom.write(function(){t();var e=b(o,s.node());e&&(s.node().innerHTML=e),A()}),e}var n="nvtooltip-"+Math.floor(1e5*Math.random()),o=null,r="w",i=25,u=0,l=null,c=!0,a=200,s=null,d={left:null,top:null},f=!0,p=100,v=!0,g="nv-pointer-events-none",m=function(t,e,n){return t},h=function(t){return t},y=function(t,e){return t},b=function(t,e){if(null===t)return"";var n=d3.select(document.createElement("table"));if(v){var o=n.selectAll("thead").data([t]).enter().append("thead");o.append("tr").append("td").attr("colspan",3).append("strong").classed("x-value",!0).html(h(t.value))}var r=n.selectAll("tbody").data([t]).enter().append("tbody"),i=r.selectAll("tr").data(function(t){return t.series}).enter().append("tr").classed("highlight",function(t){return t.highlight});i.append("td").classed("legend-color-guide",!0).append("div").style("background-color",function(t){return t.color}),i.append("td").classed("key",!0).classed("total",function(t){return!!t.total}).html(function(t,e){return y(t.key,e)}),i.append("td").classed("value",!0).html(function(t,e){return m(t.value,e,t)}),i.filter(function(t,e){return void 0!==t.percent}).append("td").classed("percent",!0).html(function(t,e){return"("+d3.format("%")(t.percent)+")"}),i.selectAll("td").each(function(t){if(t.highlight){var e=d3.scale.linear().domain([0,1]).range(["#fff",t.color]),n=.6;d3.select(this).style("border-bottom-color",e(n)).style("border-top-color",e(n))}});var u=n.node().outerHTML;return void 0!==t.footer&&(u+="<div class='footer'>"+t.footer+"</div>"),u},x=function(){var t={left:null!==d3.event?d3.event.clientX:0,top:null!==d3.event?d3.event.clientY:0};if("none"!=getComputedStyle(document.body).transform){var e=document.body.getBoundingClientRect();t.left-=e.left,t.top-=e.top}return t},k=function(t){if(t&&t.series){if(nv.utils.isArray(t.series))return!0;if(nv.utils.isObject(t.series))return t.series=[t.series],!0}return!1},w=function(t){var e,n,o,u=s.node().offsetHeight,l=s.node().offsetWidth,c=document.documentElement.clientWidth,a=document.documentElement.clientHeight;switch(r){case"e":e=-l-i,n=-(u/2),t.left+e<0&&(e=i),(o=t.top+n)<0&&(n-=o),(o=t.top+n+u)>a&&(n-=o-a);break;case"w":e=i,n=-(u/2),t.left+e+l>c&&(e=-l-i),(o=t.top+n)<0&&(n-=o),(o=t.top+n+u)>a&&(n-=o-a);break;case"n":e=-(l/2)-5,n=i,t.top+n+u>a&&(n=-u-i),(o=t.left+e)<0&&(e-=o),(o=t.left+e+l)>c&&(e-=o-c);break;case"s":e=-(l/2),n=-u-i,t.top+n<0&&(n=i),(o=t.left+e)<0&&(e-=o),(o=t.left+e+l)>c&&(e-=o-c);break;case"center":e=-(l/2),n=-(u/2);break;default:e=0,n=0}return{left:e,top:n}},A=function(){nv.dom.read(function(){var t=x(),e=w(t),n=t.left+e.left,o=t.top+e.top;if(c)s.interrupt().transition().delay(a).duration(0).style("opacity",0);else{var r="translate("+d.left+"px, "+d.top+"px)",i="translate("+Math.round(n)+"px, "+Math.round(o)+"px)",u=d3.interpolateString(r,i),l=s.style("opacity")<.1;s.interrupt().transition().duration(l?0:p).styleTween("transform",function(t){return u},"important").styleTween("-webkit-transform",function(t){return u}).style("-ms-transform",i).style("opacity",1)}d.left=n,d.top=o})};return e.nvPointerEventsClass=g,e.options=nv.utils.optionsFunc.bind(e),e._options=Object.create({},{duration:{get:function(){return p},set:function(t){p=t}},gravity:{get:function(){return r},set:function(t){r=t}},distance:{get:function(){return i},set:function(t){i=t}},snapDistance:{get:function(){return u},set:function(t){u=t}},classes:{get:function(){return l},set:function(t){l=t}},enabled:{get:function(){return f},set:function(t){f=t}},hideDelay:{get:function(){return a},set:function(t){a=t}},contentGenerator:{get:function(){return b},set:function(t){b=t}},valueFormatter:{get:function(){return m},set:function(t){m=t}},headerFormatter:{get:function(){return h},set:function(t){h=t}},keyFormatter:{get:function(){return y},set:function(t){y=t}},headerEnabled:{get:function(){return v},set:function(t){v=t}},position:{get:function(){return x},set:function(t){x=t}},chartContainer:{get:function(){return document.body},set:function(t){nv.deprecated("chartContainer","feature removed after 1.8.3")}},fixedTop:{get:function(){return null},set:function(t){nv.deprecated("fixedTop","feature removed after 1.8.1")}},offset:{get:function(){return{left:0,top:0}},set:function(t){nv.deprecated("offset","use chart.tooltip.distance() instead")}},hidden:{get:function(){return c},set:function(t){c!=t&&(c=!!t,e())}},data:{get:function(){return o},set:function(t){t.point&&(t.value=t.point.x,t.series=t.series||{},t.series.value=t.point.y,t.series.color=t.point.color||t.series.color),o=t}},node:{get:function(){return s.node()},set:function(t){}},id:{get:function(){return n},set:function(t){}}}),nv.utils.initOptions(e),e};